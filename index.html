<html>
  <head>
    <title>Image Resizer</title>
  </head>
  <body>
    <h2 style="text-align: center">Resize Image by Canvas HTML + Javascript</h2>
    <!-- Form Input -->
    <form enctype="multipart/form-data">
      <canvas id="img-canvas" width="100" height="100" style="border: 2px solid"></canvas><br />
      <input type="file" id="upload-image" accept=".jpg, .jpeg, .png">
    </form>

    <!-- Javascript -->
    <script>
      var input = document.querySelector('input')
      input.addEventListener('change', uploadResize);

      function uploadResize(event) {
        // Set variable for all attribute
        var canvas = document.querySelector('canvas')
        , ctx = canvas.getContext('2d')
        , reader = new FileReader()
        , file = event.target.files[0]
        , size = 640;
        // size dapat diubah sesuai keinginan, kalau saya selalu menggunakan 640 pixel

        if (file.type != 'image/jpeg' && file.type != 'image/png') {
          alert('Gambar harus berformat JPG atau PNG');
        } else {
          // Note: reading file is async
          reader.onload = (event) => {
            let img = new Image();
            img.src = canvas.toDataURL('image/png', 0.1);
            img.onload = function(){
              if(img.width > size) {
    						img.height *= size / img.width;
    						img.width = size;
    					}
              ctx.drawImage(img,0,0, img.width, img.height);
            };
            img.src = event.target.result;
          };
          if (file) {
            reader.readAsDataURL(file);
            console.log(file)
          }
        }
      }

    </script>
  </body>
</html>
